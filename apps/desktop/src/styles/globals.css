@tailwind base;
@tailwind components;
@tailwind utilities;

/* =============================================================================
   GEMINI COWORK - LUMINA DESIGN SYSTEM
   Refined Material You + Apple-inspired color system
   ============================================================================= */

@layer base {
  :root {
    /* ==========================================================================
       CORE BACKGROUNDS - Apple-inspired warm organic grays
       ========================================================================== */
    --bg-primary: 13 13 15;           /* #0D0D0F - Deepest background */
    --bg-secondary: 21 21 24;         /* #151518 - Elevated surfaces */
    --bg-tertiary: 28 28 32;          /* #1C1C20 - Cards, panels */
    --bg-elevated: 36 36 41;          /* #242429 - Hover states */
    --bg-quaternary: 45 45 51;        /* #2D2D33 - Active states */

    /* Apple Material Base */
    --material-bg: 37 37 41;          /* #252529 - Material base */

    /* ==========================================================================
       PRIMARY - Refined Indigo (Material You tonal palette)
       ========================================================================== */
    --primary-0: 0 0 0;
    --primary-10: 0 16 107;
    --primary-20: 0 35 145;
    --primary-30: 0 56 185;
    --primary-40: 79 82 217;          /* #4F52D9 - Container */
    --primary-50: 107 110 240;        /* #6B6EF0 - Main Primary */
    --primary-60: 139 142 255;        /* #8B8EFF - Hover */
    --primary-70: 171 174 255;        /* #ABAEFF - Light text */
    --primary-80: 198 198 255;        /* #C6C6FF - On container */
    --primary-90: 226 224 255;
    --primary-95: 241 239 255;
    --primary-99: 255 251 255;
    --primary-100: 255 255 255;

    --primary: 107 110 240;
    --primary-foreground: 13 13 15;
    --primary-container: 79 82 217;
    --primary-container-foreground: 198 198 255;

    /* ==========================================================================
       SECONDARY - Sophisticated Purple (Material You tonal palette)
       ========================================================================== */
    --secondary-0: 0 0 0;
    --secondary-10: 35 0 70;
    --secondary-20: 61 14 106;
    --secondary-30: 86 45 138;
    --secondary-40: 112 73 166;       /* #7049A6 - Container */
    --secondary-50: 138 98 194;       /* #8A62C2 - Main Secondary */
    --secondary-60: 164 124 222;      /* #A47CDE - Hover */
    --secondary-70: 191 151 251;      /* #BF97FB - Light text */
    --secondary-80: 216 186 255;      /* #D8BAFF - On container */
    --secondary-90: 237 220 255;
    --secondary-95: 247 237 255;
    --secondary-99: 255 251 255;
    --secondary-100: 255 255 255;

    --secondary: 138 98 194;
    --secondary-foreground: 13 13 15;
    --secondary-container: 112 73 166;
    --secondary-container-foreground: 216 186 255;

    /* ==========================================================================
       TERTIARY - Refined Teal (Complementary accent)
       ========================================================================== */
    --tertiary-0: 0 0 0;
    --tertiary-10: 0 32 32;
    --tertiary-20: 0 55 55;
    --tertiary-30: 0 79 80;
    --tertiary-40: 0 105 106;         /* #00696A - Container */
    --tertiary-50: 0 133 133;         /* #008585 - Main Tertiary */
    --tertiary-60: 0 161 163;         /* #00A1A3 - Hover */
    --tertiary-70: 0 189 191;         /* #00BDBF */
    --tertiary-80: 0 219 221;         /* #00DBDD - On container */
    --tertiary-90: 0 249 251;
    --tertiary-95: 173 255 254;
    --tertiary-99: 248 255 254;
    --tertiary-100: 255 255 255;

    --tertiary: 0 133 133;
    --tertiary-foreground: 255 255 255;
    --tertiary-container: 0 105 106;
    --tertiary-container-foreground: 0 219 221;

    /* ==========================================================================
       NEUTRAL - Warm organic grays (Apple-inspired)
       ========================================================================== */
    --neutral-0: 0 0 0;
    --neutral-4: 13 13 15;            /* #0D0D0F */
    --neutral-6: 17 17 20;            /* #111114 */
    --neutral-8: 21 21 24;            /* #151518 */
    --neutral-12: 28 28 32;           /* #1C1C20 */
    --neutral-17: 36 36 41;           /* #242429 */
    --neutral-22: 45 45 51;           /* #2D2D33 */
    --neutral-30: 62 62 69;           /* #3E3E45 */
    --neutral-40: 87 87 96;           /* #575760 */
    --neutral-50: 112 112 123;        /* #70707B */
    --neutral-60: 138 138 149;        /* #8A8A95 */
    --neutral-70: 165 165 176;        /* #A5A5B0 */
    --neutral-80: 193 193 202;        /* #C1C1CA */
    --neutral-87: 212 212 219;        /* #D4D4DB */
    --neutral-90: 227 227 233;        /* #E3E3E9 */
    --neutral-92: 233 233 238;        /* #E9E9EE */
    --neutral-94: 239 239 243;        /* #EFEFF3 */
    --neutral-95: 242 242 246;        /* #F2F2F6 */
    --neutral-96: 245 245 248;        /* #F5F5F8 */
    --neutral-98: 250 250 252;        /* #FAFAFC */
    --neutral-99: 253 253 254;        /* #FDFDFE */
    --neutral-100: 255 255 255;

    /* Neutral Variant - For borders/dividers */
    --neutral-variant-30: 65 65 77;    /* #41414D */
    --neutral-variant-50: 111 111 123; /* #6F6F7B */
    --neutral-variant-60: 137 137 149; /* #898995 */
    --neutral-variant-80: 196 196 208; /* #C4C4D0 */

    /* ==========================================================================
       SEMANTIC COLORS - Material You with warmth
       ========================================================================== */
    /* Error - Refined red */
    --error-0: 0 0 0;
    --error-10: 65 0 2;
    --error-20: 105 0 5;
    --error-30: 147 0 10;
    --error-40: 186 26 26;            /* #BA1A1A - Container */
    --error-50: 222 55 48;            /* #DE3730 - Main Error */
    --error-60: 255 84 73;            /* #FF5449 - Hover */
    --error-70: 255 137 125;          /* #FF897D - Light text */
    --error-80: 255 180 171;          /* #FFB4AB - On container */
    --error-90: 255 218 214;
    --error-95: 255 237 234;
    --error-99: 255 251 255;
    --error-100: 255 255 255;

    --error: 222 55 48;
    --error-foreground: 255 255 255;

    /* Success - Organic green */
    --success-40: 29 92 56;           /* #1D5C38 */
    --success-50: 54 120 81;          /* #367851 */
    --success-60: 80 149 106;         /* #50956A - Main */
    --success-80: 143 220 169;        /* #8FDCA9 - Light */
    --success-90: 170 249 196;        /* #AAF9C4 */
    --success: 80 149 106;
    --success-foreground: 255 255 255;

    /* Warning - Warm amber */
    --warning-40: 120 89 0;           /* #785900 */
    --warning-50: 147 113 0;          /* #937100 */
    --warning-60: 176 139 0;          /* #B08B00 - Main */
    --warning-80: 245 196 0;          /* #F5C400 - Light */
    --warning-90: 255 225 111;        /* #FFE16F */
    --warning: 176 139 0;
    --warning-foreground: 0 0 0;

    /* Info - Cool blue */
    --info-40: 0 76 111;              /* #004C6F */
    --info-50: 0 102 144;             /* #006690 */
    --info-60: 0 128 179;             /* #0080B3 - Main */
    --info-80: 69 195 255;            /* #45C3FF - Light */
    --info-90: 186 230 255;           /* #BAE6FF */
    --info: 0 128 179;
    --info-foreground: 255 255 255;

    /* ==========================================================================
       TEXT COLORS - Apple Label System
       ========================================================================== */
    --foreground: 255 255 255;
    --foreground-opacity: 0.95;        /* Label Primary */
    --foreground-secondary: 255 255 255;
    --foreground-secondary-opacity: 0.70;  /* Label Secondary */
    --foreground-tertiary: 255 255 255;
    --foreground-tertiary-opacity: 0.50;   /* Label Tertiary */
    --foreground-quaternary: 255 255 255;
    --foreground-quaternary-opacity: 0.25; /* Label Quaternary */

    /* ==========================================================================
       BORDERS - Subtle hierarchy
       ========================================================================== */
    --border: 255 255 255;
    --border-opacity: 0.08;            /* Default */
    --border-strong: 255 255 255;
    --border-strong-opacity: 0.14;     /* Strong */
    --border-subtle: 255 255 255;
    --border-subtle-opacity: 0.06;     /* Subtle */

    /* ==========================================================================
       GLASS MATERIALS - Apple-inspired
       ========================================================================== */
    --glass-bg: 37 37 41;
    --glass-bg-ultra-thin: 0.50;
    --glass-bg-thin: 0.64;
    --glass-bg-regular: 0.78;
    --glass-bg-thick: 0.88;
    --glass-bg-ultra-thick: 0.96;

    --glass-border: 255 255 255;
    --glass-border-ultra-thin: 0.08;
    --glass-border-thin: 0.10;
    --glass-border-regular: 0.12;
    --glass-border-thick: 0.14;
    --glass-border-ultra-thick: 0.16;

    /* ==========================================================================
       RING (Focus states)
       ========================================================================== */
    --ring: 107 110 240;
    --ring-opacity: 0.5;

    /* ==========================================================================
       ANIMATION TIMING
       ========================================================================== */
    --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
    --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
    --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
    --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);

    --duration-instant: 75ms;
    --duration-fast: 150ms;
    --duration-normal: 250ms;
    --duration-slow: 350ms;
    --duration-slower: 500ms;
  }
}

/* =============================================================================
   BASE STYLES
   ============================================================================= */
@layer base {
  * {
    @apply border-white/[0.08];
  }

  html {
    background-color: #0D0D0F;
  }

  body {
    @apply bg-[#0D0D0F] text-white/95 antialiased;
    font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1, "ss02" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* =============================================================================
     PREMIUM SCROLLBAR - Ultra refined
     ============================================================================= */
  ::-webkit-scrollbar {
    @apply w-[6px] h-[6px];
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-white/10 rounded-full;
    border: 1px solid transparent;
    background-clip: content-box;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-white/20;
  }

  ::-webkit-scrollbar-corner {
    @apply bg-transparent;
  }

  /* =============================================================================
     WINDOW DRAG AREAS (Tauri)
     ============================================================================= */
  .window-drag {
    -webkit-app-region: drag;
  }

  .window-no-drag {
    -webkit-app-region: no-drag;
  }
}

/* =============================================================================
   GLASS MATERIAL UTILITIES - Apple-inspired 5-level system
   ============================================================================= */
@layer utilities {
  /* Ultra Thin Material - For title bars, headers */
  .glass-ultra-thin {
    @apply backdrop-blur-[8px];
    background: rgba(37, 37, 41, 0.50);
    border: 1px solid rgba(255, 255, 255, 0.08);
  }

  /* Thin Material - For navigation */
  .glass-thin {
    @apply backdrop-blur-[12px];
    background: rgba(37, 37, 41, 0.64);
    border: 1px solid rgba(255, 255, 255, 0.10);
  }

  /* Regular Material - For cards, panels (default glass) */
  .glass {
    @apply backdrop-blur-xl;
    background: rgba(37, 37, 41, 0.78);
    border: 1px solid rgba(255, 255, 255, 0.12);
  }

  /* Strong Material */
  .glass-strong {
    @apply backdrop-blur-2xl;
    background: rgba(37, 37, 41, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.14);
  }

  /* Thick Material - For modals, dialogs */
  .glass-thick {
    @apply backdrop-blur-[28px];
    background: rgba(37, 37, 41, 0.88);
    border: 1px solid rgba(255, 255, 255, 0.14);
  }

  /* Ultra Thick Material - For popovers, menus, tooltips */
  .glass-ultra-thick {
    @apply backdrop-blur-[40px];
    background: rgba(37, 37, 41, 0.96);
    border: 1px solid rgba(255, 255, 255, 0.16);
  }

  /* Subtle glass for overlays */
  .glass-subtle {
    @apply backdrop-blur-md;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.04);
  }

  /* =============================================================================
     GRADIENT TEXT UTILITIES
     ============================================================================= */
  .text-gradient {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, #6B6EF0 0%, #8A62C2 50%, #008585 100%);
  }

  .text-gradient-subtle {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(180deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.70) 100%);
  }

  .text-gradient-primary {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, #C6C6FF 0%, #ABAEFF 100%);
  }

  /* =============================================================================
     GLOW EFFECTS
     ============================================================================= */
  .glow-primary {
    box-shadow: 0 0 30px rgba(107, 110, 240, 0.3);
  }

  .glow-primary-sm {
    box-shadow: 0 0 20px rgba(107, 110, 240, 0.2);
  }

  .glow-primary-lg {
    box-shadow: 0 0 50px rgba(107, 110, 240, 0.4);
  }

  .glow-secondary {
    box-shadow: 0 0 30px rgba(138, 98, 194, 0.3);
  }

  .glow-tertiary {
    box-shadow: 0 0 30px rgba(0, 133, 133, 0.3);
  }

  /* =============================================================================
     SURFACE GRADIENTS
     ============================================================================= */
  .surface-gradient {
    background: linear-gradient(180deg, rgba(255,255,255,0.04) 0%, transparent 100%);
  }

  .surface-gradient-reverse {
    background: linear-gradient(0deg, rgba(255,255,255,0.03) 0%, transparent 100%);
  }

  /* =============================================================================
     AMBIENT GLOW BACKGROUND
     ============================================================================= */
  .ambient-glow {
    position: relative;
  }

  .ambient-glow::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    right: -50%;
    bottom: -50%;
    background: radial-gradient(ellipse at top, rgba(107, 110, 240, 0.08) 0%, transparent 50%);
    pointer-events: none;
    z-index: -1;
  }

  /* =============================================================================
     ANIMATION KEYFRAMES
     ============================================================================= */
  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(12px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.96);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes pulseGlow {
    0%, 100% {
      box-shadow: 0 0 20px rgba(107, 110, 240, 0.3);
    }
    50% {
      box-shadow: 0 0 40px rgba(107, 110, 240, 0.5);
    }
  }

  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  @keyframes typing {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-4px); }
  }

  @keyframes breathe {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 0.7; }
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
  }

  /* =============================================================================
     ANIMATION UTILITY CLASSES
     ============================================================================= */
  .animate-fade-up {
    animation: fadeUp 0.35s var(--ease-out-expo) forwards;
  }

  .animate-fade-in {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .animate-scale-in {
    animation: scaleIn 0.25s var(--ease-out-back) forwards;
  }

  .animate-slide-in-left {
    animation: slideInLeft 0.3s var(--ease-out-expo) forwards;
  }

  .animate-slide-in-right {
    animation: slideInRight 0.3s var(--ease-out-expo) forwards;
  }

  .animate-pulse-glow {
    animation: pulseGlow 2s ease-in-out infinite;
  }

  .animate-shimmer {
    animation: shimmer 2s linear infinite;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
    background-size: 200% 100%;
  }

  .animate-typing {
    animation: typing 1s ease-in-out infinite;
  }

  .animate-breathe {
    animation: breathe 4s ease-in-out infinite;
  }

  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  /* =============================================================================
     STAGGER CHILDREN ANIMATION
     ============================================================================= */
  .stagger-children > * {
    opacity: 0;
    animation: fadeUp 0.35s var(--ease-out-expo) forwards;
  }

  .stagger-children > *:nth-child(1) { animation-delay: 0ms; }
  .stagger-children > *:nth-child(2) { animation-delay: 50ms; }
  .stagger-children > *:nth-child(3) { animation-delay: 100ms; }
  .stagger-children > *:nth-child(4) { animation-delay: 150ms; }
  .stagger-children > *:nth-child(5) { animation-delay: 200ms; }
  .stagger-children > *:nth-child(6) { animation-delay: 250ms; }
  .stagger-children > *:nth-child(7) { animation-delay: 300ms; }
  .stagger-children > *:nth-child(8) { animation-delay: 350ms; }

  /* =============================================================================
     FOCUS RING
     ============================================================================= */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-[#6B6EF0]/50 focus:ring-offset-2 focus:ring-offset-[#0D0D0F];
  }

  /* =============================================================================
     HOVER LIFT EFFECT
     ============================================================================= */
  .hover-lift {
    @apply transition-transform duration-200;
  }

  .hover-lift:hover {
    transform: translateY(-2px);
  }
}

/* =============================================================================
   SHIKI CODE BLOCK STYLING
   ============================================================================= */
@layer components {
  .shiki-code-block pre {
    @apply m-0 p-0 bg-transparent;
  }

  .shiki-code-block code {
    @apply font-mono text-sm leading-relaxed;
    counter-reset: line;
  }

  .shiki-code-block.show-line-numbers code {
    display: grid;
  }

  .shiki-code-block.show-line-numbers code > .line {
    display: grid;
    grid-template-columns: 2.5rem 1fr;
    gap: 1rem;
  }

  .shiki-code-block.show-line-numbers code > .line::before {
    counter-increment: line;
    content: counter(line);
    @apply text-[#70707B] text-right select-none pr-2 border-r border-white/[0.08];
  }

  /* Ensure shiki themes inherit proper background */
  .shiki {
    @apply bg-transparent !important;
  }

  .shiki code {
    @apply bg-transparent;
  }

  /* Line highlighting - refined colors */
  .shiki-code-block .line.highlighted {
    @apply bg-[#6B6EF0]/10 -mx-4 px-4;
  }

  .shiki-code-block .line.diff.add {
    @apply bg-[#50956A]/10;
  }

  .shiki-code-block .line.diff.remove {
    @apply bg-[#DE3730]/10;
  }

  /* Code block transitions */
  .code-block-with-lines {
    @apply transition-all duration-200;
  }
}
