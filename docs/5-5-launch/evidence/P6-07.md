# P6-07 Evidence

## Change Summary

- Implemented command-intent classification in sandbox validator with primary+multi-intent output and confidence score.
- Added trust scoring for shell commands with explicit factors (trusted prefix match, network/process usage, mutating behavior, denied/outside-path access, shell-injection patterns, and risk tier).
- Extended sandbox shared types to include:
  - `CommandIntent`, `CommandIntentClassification`,
  - `CommandTrustLevel`, `CommandTrustAssessment`,
  - `CommandAnalysis.intent` and `CommandAnalysis.trust`.

## Files Changed

- packages/sandbox/src/types.ts
- packages/sandbox/src/validator.ts
- packages/sandbox/src/index.ts

## Verification Commands

```bash
pnpm --filter @gemini-cowork/sandbox typecheck
pnpm --filter @gemini-cowork/sandbox test
```

## Verification Output Summary

- Sandbox typecheck: pass (`tsc --noEmit`).
- Sandbox tests: pass (`7 passed` including validator intent/trust tests).

## Acceptance Mapping

- Plan acceptance criteria: `P6-07` command intent classification + trust scoring.
- Result: Completed. Validator returns deterministic intent + trust output used by policy/runtime surfaces.

## Residual Risks

- Intent confidence calibration is heuristic; benchmark calibration against larger real command corpora is still recommended.
