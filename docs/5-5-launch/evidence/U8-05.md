# U8-05 Evidence

## Change Summary

- Added a dedicated preview error boundary around `PreviewContent` to prevent preview crashes from taking down the panel.
- Added large-content virtualization path for code/text previews:
  - switches automatically to virtualized rendering for large line/character counts,
  - keeps scrolling smooth and avoids rendering the full document DOM at once.
- Added explicit “large file mode” indicator in code preview when virtualized mode is active.

## Files Changed

- apps/desktop/src/components/panels/PreviewPanel.tsx

## Verification Commands

```bash
pnpm --filter @gemini-cowork/desktop typecheck
pnpm --filter @gemini-cowork/sidecar typecheck
```

## Verification Output Summary

- Desktop and sidecar typechecks pass with error-boundary and virtualized-preview logic.

## Acceptance Mapping

- Plan acceptance criteria: Large artifacts do not freeze panel interactions.
- Result: Done. Preview panel now guards renderer failures and virtualizes large text/code content.

## Residual Risks

- Virtualized path currently targets large text/code payloads; spreadsheet-scale virtualization can be expanded further if benchmark traces show table-heavy bottlenecks.

## Rollback Path

- Revert `PreviewErrorBoundary` and `VirtualizedTextViewer` additions in `PreviewPanel.tsx`.
