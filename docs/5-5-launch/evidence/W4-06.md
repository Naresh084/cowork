# W4-06 Evidence

## Change Summary

- Extended workflow store with live run streaming and buffering:
  - `runEventBuffers`, `runEventCursorTs`, `runStreamState`, replay cursors,
  - polling loop start/stop APIs,
  - merge-safe incremental event ingestion.
- Added run health derivation and scheduled health aggregation:
  - run-level stall/degraded/terminal states,
  - schedule-level overdue/failure/running indicators.
- Integrated health recomputation on run/schedule lifecycle updates.

## Files Changed

- /Users/naresh/Work/Personal/cowork/apps/desktop/src/stores/workflow-store.ts
- /Users/naresh/Work/Personal/cowork/apps/desktop/src/components/workflow/WorkflowRunPanel.tsx

## Verification Commands

```bash
pnpm --filter @cowork/desktop typecheck
pnpm --filter @cowork/sidecar typecheck
```

## Verification Output Summary

- Desktop typecheck passes with new store state/actions and UI bindings.
- Sidecar typecheck passes (no regression in workflow IPC paths).

## Acceptance Mapping

- Plan acceptance criteria: live progression without refresh and scheduled health visibility.
- Result: live poll stream + buffered timeline + schedule health indicators implemented.

## Residual Risks

- Live transport is polling-based; event push optimization remains a potential future enhancement.

## Rollback Path

- Revert streaming/health additions in `workflow-store.ts` and consumer usage in `WorkflowRunPanel.tsx`.
