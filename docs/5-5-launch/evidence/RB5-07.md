# RB5-07 Evidence

## Change Summary

- Added new research/browser event envelopes end-to-end:
  - `research:evidence`
  - `browser:progress`
  - `browser:checkpoint`
  - `browser:blocker`
- Updated shared event typing and parsing in:
  - `/Users/naresh/Work/Personal/geminicowork/apps/desktop/src/lib/event-types.ts`
  - `/Users/naresh/Work/Personal/geminicowork/apps/desktop/src/lib/agent-events.ts`
  - `/Users/naresh/Work/Personal/geminicowork/apps/desktop/src-sidecar/src/types.ts`
  - `/Users/naresh/Work/Personal/geminicowork/apps/desktop/src-sidecar/src/event-emitter.ts`
- Wired frontend event handling in:
  - `/Users/naresh/Work/Personal/geminicowork/apps/desktop/src/hooks/useAgentEvents.ts`
  - `/Users/naresh/Work/Personal/geminicowork/apps/desktop/src/stores/chat-store.ts`

## Files Changed

- /Users/naresh/Work/Personal/geminicowork/apps/desktop/src/lib/event-types.ts
- /Users/naresh/Work/Personal/geminicowork/apps/desktop/src/lib/agent-events.ts
- /Users/naresh/Work/Personal/geminicowork/apps/desktop/src/hooks/useAgentEvents.ts
- /Users/naresh/Work/Personal/geminicowork/apps/desktop/src/stores/chat-store.ts
- /Users/naresh/Work/Personal/geminicowork/apps/desktop/src-sidecar/src/types.ts
- /Users/naresh/Work/Personal/geminicowork/apps/desktop/src-sidecar/src/event-emitter.ts

## Verification Commands

```bash
pnpm --filter @gemini-cowork/desktop typecheck
pnpm --filter @gemini-cowork/sidecar typecheck
```

## Verification Output Summary

- Desktop and sidecar typechecks pass with full event-contract compatibility.

## Acceptance Mapping

- Plan acceptance criteria: new research/browser envelopes handled without drops under stream load.
- Current result: event contracts and handlers implemented; stress-drop benchmark remains pending.

## Residual Risks

- High-throughput event stress test coverage still needs explicit benchmark execution.

## Rollback Path

- Revert added event variants and fallback to existing research progress + screenshot-only events.
